# {{ ansible_managed }}

$ModLoad imuxsock
$ModLoad imjournal
$ModLoad imklog

$WorkDirectory {{ rsyslog_client_work_directory }}
$ActionFileDefaultTemplate {{ rsyslog_client_action_template }}
$IncludeConfig /etc/rsyslog.d/*.conf
$OmitLocalLogging {{ rsyslog_client_omit_local_logging }}
$IMJournalStateFile {{ rsyslog_client_imjournal_file }}
$PreserveFQDN {{ rsyslog_client_preserve_fqdn }}

{% if ansible_fqdn not in groups['rsyslog_relays'] %}
*.* @@{{ rsyslog_client_relay_fqdn }}:{{ rsyslog_client_relay_port }}
{% endif %}
