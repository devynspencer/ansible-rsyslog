{{ ansible_managed | comment }}

module(load="imuxsock") # system logging
module(load="imklog")   # kernel logging

kern.*																									/dev/console

*.info;mail.none;authpriv.none;cron.none                /var/log/messages
authpriv.*                                              /var/log/secure
mail.*                                                  /var/log/maillog
cron.*                                                  /var/log/cron
uucp,news.crit                                          /var/log/spooler
local7.*                                                /var/log/boot.log

*.emerg                                                 :omusrmsg:*

$IncludeConfig /etc/rsyslog.d/*.conf

$IMJournalStateFile {{ rsyslog_imjournal_file }}
$PreserveFQDN {{ rsyslog_preserve_fqdn }}
$OmitLocalLogging {{ rsyslog_omit_local_logging }}

$WorkDirectory {{ rsyslog_work_directory }}
$ActionQueueFileName fwdRule1 # unique name prefix for spool files
$ActionQueueMaxDiskSpace 1g   # 1gb space limit (use as much as possible)
$ActionQueueSaveOnShutdown on # save messages to disk on shutdown
$ActionQueueType LinkedList   # run asynchronously
$ActionResumeRetryCount -1    # infinite retries if host is down
$ActionFileDefaultTemplate {{ rsyslog_action_template }}
*.* @@{{ rsyslog_relay_fqdn }}:{{ rsyslog_relay_port }}
