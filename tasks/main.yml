---

- include: install/redhat.yml
  when: ansible_os_family == 'redhat'

- include: install/debian.yml
  when: ansible_os_family == 'debian'

- name: ensure rsyslog process is monitored by snmpd
  template: >
    src=templates/rsyslog.snmpd.conf.j2
    dest={{ snmp_include_dir }}/rsyslog.conf
    owner=root
    group=root
    mode=0600
  notify:
    - reload snmpd
  when:
    - rsyslog_enable_snmp_monitor

- name: ensure client configuration exists
  template: >
    src=templates/rsyslog.conf.j2
    dest=/etc/rsyslog.conf
    owner=root
    group=root
    mode=0600
  notify:
    - restart rsyslog
